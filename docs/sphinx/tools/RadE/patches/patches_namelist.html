<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>PATCHES Namelist &#8212; Truchas 1.0 documentation</title>
    <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../../../_static/bootstrap-sphinx.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/graphviz.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/css/sphinxdoc.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/css/theme.css" />
    <script id="documentation_options" data-url_root="../../../" src="../../../_static/documentation_options.js"></script>
    <script src="../../../_static/jquery.js"></script>
    <script src="../../../_static/underscore.js"></script>
    <script src="../../../_static/doctools.js"></script>
    <script async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <link rel="shortcut icon" href="../../../_static/favicon.ico"/>
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" />
    <link rel="next" title="Sphinx Documentation Style Guide" href="../../../style_guide.html" />
    <link rel="prev" title="Variational Shape Approximation (VSA)" href="vsa.html" />
<meta charset='utf-8'>
<meta http-equiv='X-UA-Compatible' content='IE=edge,chrome=1'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, maximum-scale=1'>
<meta name="apple-mobile-web-app-capable" content="yes">
<script type="text/javascript" src="../../../_static/js/jquery-1.11.0.min.js "></script>
<script type="text/javascript" src="../../../_static/js/jquery-fix.js "></script>
<script type="text/javascript" src="../../../_static/bootstrap-3.3.7/js/bootstrap.min.js "></script>
<script type="text/javascript" src="../../../_static/bootstrap-sphinx.js "></script>

  </head><body>

  <div id="navbar" class="navbar navbar-default navbar-fixed-top">
    <div class="container">
      <div class="navbar-header">
        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="../../../index.html">
          Truchas</a>
        <span class="navbar-text navbar-version pull-left"><b>1.0</b></span>
      </div>

        <div class="collapse navbar-collapse nav-collapse">
          <ul class="nav navbar-nav">
            
            
              <li class="dropdown globaltoc-container">
  <a role="button"
     id="dLabelGlobalToc"
     data-toggle="dropdown"
     data-target="#"
     href="../../../index.html">Site <b class="caret"></b></a>
  <ul class="dropdown-menu globaltoc"
      role="menu"
      aria-labelledby="dLabelGlobalToc"><ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="../index.html">Radiation Enclosure Tools</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="index.html">Enclosure Patches</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="pave.html">Vertex Anchor Cluster Paving (PAVE)</a></li>
<li class="toctree-l3"><a class="reference internal" href="vac.html">Vertex Anchor Cluster (VAC)</a></li>
<li class="toctree-l3"><a class="reference internal" href="vsa.html">Variational Shape Approximation (VSA)</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">PATCHES Namelist</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../style_guide.html">Sphinx Documentation Style Guide</a></li>
</ul>
</ul>
</li>
              
            
            
              
                
  <li>
    <a href="vsa.html" title="Previous Chapter: Variational Shape Approximation (VSA)"><span class="glyphicon glyphicon-chevron-left visible-sm"></span><span class="hidden-sm hidden-tablet">&laquo; Variational S...</span>
    </a>
  </li>
  <li>
    <a href="../../../style_guide.html" title="Next Chapter: Sphinx Documentation Style Guide"><span class="glyphicon glyphicon-chevron-right visible-sm"></span><span class="hidden-sm hidden-tablet">Sphinx Docume... &raquo;</span>
    </a>
  </li>
              
            
            
            
            
              <li class="hidden-sm">
<div id="sourcelink">
  <a href="../../../_sources/tools/RadE/patches/patches_namelist.rst.txt"
     rel="nofollow">Source</a>
</div></li>
            
          </ul>

          
            
<form class="navbar-form navbar-right" action="../../../search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
          
        </div>
    </div>
  </div>

<div class="container">
  <div class="row">
      <div class="col-md-3">
        <div id="sidebar" class="bs-sidenav" role="complementary"><!--
Based on globaltoc.html from the Guzzle Sphinx theme: https://github.com/guzzle/guzzle_sphinx_theme
-->
<div class="sidebar-block">
  <div class="sidebar-wrapper">
    <h3>Site Contents</h3>
    <div class="sidebar-toc">
      
      
        <ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="../index.html">Radiation Enclosure Tools</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="index.html">Enclosure Patches</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="pave.html">Vertex Anchor Cluster Paving (PAVE)</a></li>
<li class="toctree-l3"><a class="reference internal" href="vac.html">Vertex Anchor Cluster (VAC)</a></li>
<li class="toctree-l3"><a class="reference internal" href="vsa.html">Variational Shape Approximation (VSA)</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">PATCHES Namelist</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../style_guide.html">Sphinx Documentation Style Guide</a></li>
</ul>

      
    </div>
  </div>
</div><!--
Based on localtoc.html from the Guzzle Sphinx theme: https://github.com/guzzle/guzzle_sphinx_theme
-->
<div class="sidebar-block">
  <div class="sidebar-wrapper">
    <h3>Page Contents</h3>
    <div class="sidebar-localtoc">
      <ul>
<li><a class="reference internal" href="#">PATCHES Namelist</a><ul>
<li><a class="reference internal" href="#general-parameters">General Parameters</a><ul>
<li><a class="reference internal" href="#patch-algorithm">PATCH_ALGORITHM</a></li>
<li><a class="reference internal" href="#verbosity-level">VERBOSITY_LEVEL</a></li>
<li><a class="reference internal" href="#max-angle">MAX_ANGLE</a></li>
</ul>
</li>
<li><a class="reference internal" href="#file-parameters">FILE Parameters</a><ul>
<li><a class="reference internal" href="#patch-file">PATCH_FILE</a></li>
</ul>
</li>
<li><a class="reference internal" href="#pave-parameters">PAVE Parameters</a><ul>
<li><a class="reference internal" href="#pave-merge-level">PAVE_MERGE_LEVEL</a></li>
<li><a class="reference internal" href="#pave-split-patch-size">PAVE_SPLIT_PATCH_SIZE</a></li>
<li><a class="reference internal" href="#pave-random-seed">PAVE_RANDOM_SEED</a></li>
</ul>
</li>
<li><a class="reference internal" href="#vac-parameters">VAC Parameters</a><ul>
<li><a class="reference internal" href="#vac-merge-level">VAC_MERGE_LEVEL</a></li>
<li><a class="reference internal" href="#vac-split-patch-size">VAC_SPLIT_PATCH_SIZE</a></li>
</ul>
</li>
<li><a class="reference internal" href="#vsa-parameters">VSA Parameters</a><ul>
<li><a class="reference internal" href="#vsa-max-iter">VSA_MAX_ITER</a></li>
<li><a class="reference internal" href="#vsa-min-delta">VSA_MIN_DELTA</a></li>
<li><a class="reference internal" href="#vsa-avg-faces-per-patch">VSA_AVG_FACES_PER_PATCH</a></li>
<li><a class="reference internal" href="#vsa-max-patch-radius">VSA_MAX_PATCH_RADIUS</a></li>
<li><a class="reference internal" href="#vsa-normalize-dist">VSA_NORMALIZE_DIST</a></li>
<li><a class="reference internal" href="#vsa-random-seed">VSA_RANDOM_SEED</a></li>
</ul>
</li>
</ul>
</li>
</ul>

    </div>
  </div>
</div>
        </div>
      </div>
    <div class="body col-md-9 content" role="main">
      
  <div class="section" id="patches-namelist">
<h1>PATCHES Namelist<a class="headerlink" href="#patches-namelist" title="Permalink to this headline">¶</a></h1>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">&amp;PATCHES</span>
<span class="go">  patch_algorithm = &#39;PAVE&#39;</span>
<span class="go">  verbosity_level = 3</span>
<span class="go">  max_angle = 30.0</span>
<span class="go">  pave_split_patch_size = 4</span>
<span class="go">/</span>
</pre></div>
</div>
<p><sup>Example PATCHES namelist</sup></p>
<p>The <cite>PATCHES</cite> namelist defines the parameters used by the patching algorithms. The namelist supports
many parameters, but not all parameters are used by all algorithms. Parameters only used by a
particular algorithm are prefixed with the algorithm’s name.</p>
<p>These parameters are described in detail below.</p>
<div class="contents local topic" id="patches-namelist-parameters">
<p class="topic-title">PATCHES namelist parameters</p>
<ul class="simple">
<li><p><a class="reference internal" href="#general-parameters" id="id2">General Parameters</a></p>
<ul>
<li><p><a class="reference internal" href="#patch-algorithm" id="id3">PATCH_ALGORITHM</a></p></li>
<li><p><a class="reference internal" href="#verbosity-level" id="id4">VERBOSITY_LEVEL</a></p></li>
<li><p><a class="reference internal" href="#max-angle" id="id5">MAX_ANGLE</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#file-parameters" id="id6">FILE Parameters</a></p>
<ul>
<li><p><a class="reference internal" href="#patch-file" id="id7">PATCH_FILE</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#pave-parameters" id="id8">PAVE Parameters</a></p>
<ul>
<li><p><a class="reference internal" href="#pave-merge-level" id="id9">PAVE_MERGE_LEVEL</a></p></li>
<li><p><a class="reference internal" href="#pave-split-patch-size" id="id10">PAVE_SPLIT_PATCH_SIZE</a></p></li>
<li><p><a class="reference internal" href="#pave-random-seed" id="id11">PAVE_RANDOM_SEED</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#vac-parameters" id="id12">VAC Parameters</a></p>
<ul>
<li><p><a class="reference internal" href="#vac-merge-level" id="id13">VAC_MERGE_LEVEL</a></p></li>
<li><p><a class="reference internal" href="#vac-split-patch-size" id="id14">VAC_SPLIT_PATCH_SIZE</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#vsa-parameters" id="id15">VSA Parameters</a></p>
<ul>
<li><p><a class="reference internal" href="#vsa-max-iter" id="id16">VSA_MAX_ITER</a></p></li>
<li><p><a class="reference internal" href="#vsa-min-delta" id="id17">VSA_MIN_DELTA</a></p></li>
<li><p><a class="reference internal" href="#vsa-avg-faces-per-patch" id="id18">VSA_AVG_FACES_PER_PATCH</a></p></li>
<li><p><a class="reference internal" href="#vsa-max-patch-radius" id="id19">VSA_MAX_PATCH_RADIUS</a></p></li>
<li><p><a class="reference internal" href="#vsa-normalize-dist" id="id20">VSA_NORMALIZE_DIST</a></p></li>
<li><p><a class="reference internal" href="#vsa-random-seed" id="id21">VSA_RANDOM_SEED</a></p></li>
</ul>
</li>
</ul>
</div>
<div class="section" id="general-parameters">
<h2>General Parameters<a class="headerlink" href="#general-parameters" title="Permalink to this headline">¶</a></h2>
<div class="section" id="patch-algorithm">
<h3>PATCH_ALGORITHM<a class="headerlink" href="#patch-algorithm" title="Permalink to this headline">¶</a></h3>
<p>Selects one of the three available algorithms, or disables patching.</p>
<blockquote class="nml-param">
<div><p><strong>Type:</strong> <code class="docutils literal notranslate"><span class="pre">STRING</span></code></p>
<p><strong>Domain:</strong> Must be one of <code class="docutils literal notranslate"><span class="pre">'NONE'</span></code>, <code class="docutils literal notranslate"><span class="pre">'PAVE'</span></code>, <code class="docutils literal notranslate"><span class="pre">'VAC'</span></code>, <code class="docutils literal notranslate"><span class="pre">'VSA'</span></code>, or <code class="docutils literal notranslate"><span class="pre">'FILE'</span></code></p>
<p><strong>Default:</strong> patch_algorithm = <code class="docutils literal notranslate"><span class="pre">'PAVE'</span></code></p>
</div></blockquote>
<p>Each option selects a different patch algorithm:</p>
<ol class="arabic simple">
<li><p><strong>NONE:</strong> No patches will be generated. All other parameters are ignored. This is equivalent to
an absent <cite>PATCHES</cite> namelist.</p></li>
<li><p><strong>PAVE:</strong> Generate patches with the <a class="reference internal" href="pave.html"><span class="doc">PAVE algorithm</span></a>.</p></li>
<li><p><strong>VAC:</strong> Generate patches with the <a class="reference internal" href="vac.html"><span class="doc">VAC algorithm</span></a>.</p></li>
<li><p><strong>VSA:</strong> Generate patches with the <a class="reference internal" href="vsa.html"><span class="doc">VSA algorithm</span></a>.</p></li>
<li><p><strong>FILE:</strong> Patches will be read from a file. Because the cost of computing
patches can be quite substantial for very large enclosure meshes, this
pseudo-algorithm is provided to enable the use of previously computed
patches.</p></li>
</ol>
</div>
<div class="section" id="verbosity-level">
<h3>VERBOSITY_LEVEL<a class="headerlink" href="#verbosity-level" title="Permalink to this headline">¶</a></h3>
<p>Defines the verbosity level for all console output of the patch algorithm.</p>
<blockquote class="nml-param">
<div><p><strong>Type:</strong> <code class="docutils literal notranslate"><span class="pre">INTEGER</span></code></p>
<p><strong>Domain:</strong> verbosity_level &gt;= 0</p>
<p><strong>Default:</strong> verbosity_level = 1</p>
</div></blockquote>
<p>The verbosity levels are defined as follows:</p>
<table class="colwidths-given docutils align-default">
<colgroup>
<col style="width: 33%" />
<col style="width: 67%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Value</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>verbosity_level = 0</p></td>
<td><p>Suppress all output.</p></td>
</tr>
<tr class="row-odd"><td><p>verbosity_level = 1</p></td>
<td><p>Print a summary of the run when algorithm finishes.</p></td>
</tr>
<tr class="row-even"><td><p>verbosity_level &gt; 1</p></td>
<td><p>Print detailed run information, used for debugging.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="max-angle">
<h3>MAX_ANGLE<a class="headerlink" href="#max-angle" title="Permalink to this headline">¶</a></h3>
<p>Defines the maximum allowable angle (in degrees) between adjacent faces.</p>
<blockquote class="nml-param">
<div><p><strong>Type:</strong> <code class="docutils literal notranslate"><span class="pre">REAL</span></code></p>
<p><strong>Domain:</strong> 0.0 &lt;= max_angle &lt;= 180.0</p>
<p><strong>Default:</strong> max_angle = 20.0</p>
</div></blockquote>
<p>All the patch algorithms construct the <a class="reference external" href="http://mathworld.wolfram.com/AdjacencyMatrix.html">adjacency matrix</a> of the enclosure faces to efficiently
determine which faces are adjacent to others. If the normals of two ‘topologically adjacent’ faces
exceed <em>max_angle</em>, then the faces will not be neighbors in the internal adjacency matrix.</p>
<div class="figure align-center" id="id1" style="width: 45%">
<img alt="../../../_images/connected_components.png" src="../../../_images/connected_components.png" />
<p class="caption"><span class="caption-text">The connected components of the outer surface of a furnace funnel. MAX_ANGLE is set to 20
degrees. Each component is a different color. The face edges are omitted for clarity.</span><a class="headerlink" href="#id1" title="Permalink to this image">¶</a></p>
</div>
<p>The patch algorithms guarantee that patches will be <em>connected sets</em> of faces. Therefore,
<code class="docutils literal notranslate"><span class="pre">max_angle</span></code> divides the enclosure into connected components of faces wherever there are ‘sharp’
edges whose angle exceeds the parameter. Patches will never span more than one component.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p><code class="docutils literal notranslate"><span class="pre">max_angle</span></code> only applies to <em>pairs of adjacent faces</em>, so two faces within a patch may be at an
angle greater than <code class="docutils literal notranslate"><span class="pre">max_angle</span></code> if the faces between them are at sufficiently large angles. This
is unlikely in practice, given a reasonably smooth enclosure and small <code class="docutils literal notranslate"><span class="pre">max_angle</span></code>.</p>
</div>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p>The effects of <code class="docutils literal notranslate"><span class="pre">max_angle</span></code> vary by algorithm. Refer to the documentation of the <a class="reference internal" href="pave.html"><span class="doc">PAVE</span></a>, <a class="reference internal" href="vac.html"><span class="doc">VAC</span></a>, and <a class="reference internal" href="vsa.html"><span class="doc">VSA</span></a> algorithms for more details.</p>
</div>
</div>
</div>
<div class="section" id="file-parameters">
<h2>FILE Parameters<a class="headerlink" href="#file-parameters" title="Permalink to this headline">¶</a></h2>
<p>The following namelist parameter applies only to the FILE algorithm.</p>
<div class="section" id="patch-file">
<h3>PATCH_FILE<a class="headerlink" href="#patch-file" title="Permalink to this headline">¶</a></h3>
<p>The path to an existing radiation enclosure file containing patch information.
The enclosure defined by the file must be identical to current enclosure.
This may be an absolute path or a relative path.</p>
</div>
</div>
<div class="section" id="pave-parameters">
<h2>PAVE Parameters<a class="headerlink" href="#pave-parameters" title="Permalink to this headline">¶</a></h2>
<p>The following namelist parameters apply only to the PAVE algorithm. For more
information, refer to the <a class="reference internal" href="pave.html"><span class="doc">PAVE algorithm documentation</span></a>.</p>
<div class="section" id="pave-merge-level">
<h3>PAVE_MERGE_LEVEL<a class="headerlink" href="#pave-merge-level" title="Permalink to this headline">¶</a></h3>
<p>Controls the aggressiveness of patch merging for the <a class="reference internal" href="pave.html"><span class="doc">PAVE algorithm</span></a>.</p>
<blockquote class="nml-param">
<div><p><strong>Type:</strong> <code class="docutils literal notranslate"><span class="pre">INTEGER</span></code></p>
<p><strong>Domain:</strong> pave_merge_level &gt;= 0</p>
<p><strong>Default:</strong> pave_merge_level = 3</p>
</div></blockquote>
<p>After paving is complete, there will be a valid patching of the enclosure. The algorithm then
attempts to merge patches in order to reduce the patch count.</p>
<p>The merge levels are defined as follows:</p>
<table class="colwidths-given docutils align-default">
<colgroup>
<col style="width: 33%" />
<col style="width: 67%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Value</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>pave_merge_level = 0</p></td>
<td><p>No merging.</p></td>
</tr>
<tr class="row-odd"><td><p>pave_merge_level = 1</p></td>
<td><p>Merge patches that are within the faces of a vertex.</p></td>
</tr>
<tr class="row-even"><td><p>pave_merge_level = 2</p></td>
<td><p>Same as 1. Additionally, merge patches that are within the faces of pairs
of adjacent vertices. The old patches are requeued with their original
weight so that a merge is only performed if the merge candidate has a
lower weight than any of its consituent patches.</p></td>
</tr>
<tr class="row-odd"><td><p>pave_merge_level &gt;= 3</p></td>
<td><p>Same as 2. Additionally, merge patches within the faces of pairs of
adjacent vertices, but add a large weight to the requeued old patches.
This ensures that the merge is always performed.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="pave-split-patch-size">
<h3>PAVE_SPLIT_PATCH_SIZE<a class="headerlink" href="#pave-split-patch-size" title="Permalink to this headline">¶</a></h3>
<p>Defines the maximum size of patches to be split during patch merging for the <a class="reference internal" href="pave.html"><span class="doc">PAVE algorithm</span></a>.</p>
<blockquote class="nml-param">
<div><p><strong>Type:</strong> <code class="docutils literal notranslate"><span class="pre">INTEGER</span></code></p>
<p><strong>Domain:</strong> pave_split_patch_size &gt; 1</p>
<p><strong>Default:</strong> pave_split_patch_size = 3</p>
</div></blockquote>
<p>Before merging patches, all <a class="reference internal" href="#pave-merge-level"><span class="std std-ref">merge methods</span></a> find patches with less than
<code class="docutils literal notranslate"><span class="pre">pave_split_patch_size</span></code> faces and ‘split’ them into 1-face patches. The original patches aren’t
actually modified, rather they are re-queued along with their constituent faces. This allows the
algorithm to find more merge candidates and then ‘fill in the gaps’ with the 1-face patches.</p>
<p>The 1-face patches have a large weight, so they will only be used after all other patches are set.
Therefore, the enclosure will tend retain the same patches as before the split, unless this is not
possible due to a merge.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>For best results, set <code class="docutils literal notranslate"><span class="pre">pave_split_patch_size</span></code> to 3 for quadrilateral meshes
and to 5 for triangular meshes. This avoids splitting too many patches.</p>
</div>
</div>
<div class="section" id="pave-random-seed">
<h3>PAVE_RANDOM_SEED<a class="headerlink" href="#pave-random-seed" title="Permalink to this headline">¶</a></h3>
<p>Defines the seed for the random number generator used to pick the initial seed patches for the
<a class="reference internal" href="pave.html"><span class="doc">PAVE algorithm</span></a>.</p>
<blockquote class="nml-param">
<div><p><strong>Type:</strong> <code class="docutils literal notranslate"><span class="pre">INTEGER</span></code></p>
<p><strong>Domain:</strong> pave_random_seed &gt; 0</p>
<p><strong>Default:</strong> <code class="docutils literal notranslate"><span class="pre">NONE</span></code>, the seed is taken from the system clock.</p>
</div></blockquote>
<p>The PAVE algorithm begins by creating a ‘seed patch’ in each connected component of the enclosure.
Each component is then ‘paved’ or ‘tiled’ with patches, starting from the seed patch. The seed
patches are chosen randomly from a set of patches determined to produce optimal results. Refer to
the <a class="reference internal" href="pave.html#choosing-seed-patches"><span class="std std-ref">seed patches section</span></a> of the PAVE
documentation for more information on how the seed patches are selected.</p>
<p>This parameter sets the seed for the random number generator used to pick the seed patches.
Therefore, runs with the same value for this parameter will produce identical results. If this
parameter is not specified, then the seed is taken from the system clock and results will likely
vary from run to run.</p>
</div>
</div>
<div class="section" id="vac-parameters">
<h2>VAC Parameters<a class="headerlink" href="#vac-parameters" title="Permalink to this headline">¶</a></h2>
<p>The following namelist parameters apply only to the VAC algorithm. For more
information, refer to the <a class="reference internal" href="vac.html"><span class="doc">VAC algorithm documentation</span></a>.</p>
<div class="section" id="vac-merge-level">
<h3>VAC_MERGE_LEVEL<a class="headerlink" href="#vac-merge-level" title="Permalink to this headline">¶</a></h3>
<p>Controls the aggressiveness of patch merging for the <a class="reference internal" href="vac.html"><span class="doc">VAC algorithm</span></a>.</p>
<blockquote class="nml-param">
<div><p><strong>Type:</strong> <code class="docutils literal notranslate"><span class="pre">INTEGER</span></code></p>
<p><strong>Domain:</strong> vac_merge_level &gt;= 0</p>
<p><strong>Default:</strong> vac_merge_level = 3</p>
</div></blockquote>
<p>After the main stage of the VAC algorithm, there will be a valid patching of the enclosure. The
algorithm then attempts to merge patches in order to reduce the patch count.</p>
<p>The merge levels are defined as follows:</p>
<table class="colwidths-given docutils align-default">
<colgroup>
<col style="width: 33%" />
<col style="width: 67%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Value</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>vac_merge_level = 0</p></td>
<td><p>No merging.</p></td>
</tr>
<tr class="row-odd"><td><p>vac_merge_level = 1</p></td>
<td><p>Merge patches that are within the faces of a vertex.</p></td>
</tr>
<tr class="row-even"><td><p>vac_merge_level = 2</p></td>
<td><p>Same as 1. Additionally, merge patches that are within the faces of pairs
of adjacent vertices. The old patches are requeued with their original
weight so that a merge is only performed if the merge candidate has a
lower weight than any of its consituent patches.</p></td>
</tr>
<tr class="row-odd"><td><p>vac_merge_level &gt;= 3</p></td>
<td><p>Same as 2. Additionally, merge patches within the faces of pairs of
adjacent vertices, but add a large weight to the requeued old patches.
This ensures that the merge is always performed.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="vac-split-patch-size">
<h3>VAC_SPLIT_PATCH_SIZE<a class="headerlink" href="#vac-split-patch-size" title="Permalink to this headline">¶</a></h3>
<p>Defines the maximum size of patches to be split during patch merging for the <a class="reference internal" href="vac.html"><span class="doc">VAC algorithm</span></a>.</p>
<blockquote class="nml-param">
<div><p><strong>Type:</strong> <code class="docutils literal notranslate"><span class="pre">INTEGER</span></code></p>
<p><strong>Domain:</strong> vac_split_patch_size &gt; 1</p>
<p><strong>Default:</strong> vac_split_patch_size = 3</p>
</div></blockquote>
<p>Before merging patches, all <a class="reference internal" href="#vac-merge-level"><span class="std std-ref">merge methods</span></a> find patches with less than
<code class="docutils literal notranslate"><span class="pre">vac_split_patch_size</span></code> faces and ‘split’ them into 1-face patches. The original patches aren’t
actually modified, rather they are re-queued along with their constituent faces. This allows the
algorithm to find more merge candidates and then ‘fill in the gaps’ with the 1-face patches.</p>
<p>The 1-face patches have a large weight, so they will only be used after all other patches are set.
Therefore, the enclosure will tend retain the same patches as before the split, unless this is not
possible due to a merge.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>For best results, set <code class="docutils literal notranslate"><span class="pre">vac_split_patch_size</span></code> to 3 for quadrilateral meshes
and to 5 for triangular meshes. This avoids splitting too many patches.</p>
</div>
</div>
</div>
<div class="section" id="vsa-parameters">
<h2>VSA Parameters<a class="headerlink" href="#vsa-parameters" title="Permalink to this headline">¶</a></h2>
<p>The following namelist parameters apply only to the VSA algorithm. For more
information, refer to the <a class="reference internal" href="vsa.html"><span class="doc">VSA algorithm documentation</span></a>.</p>
<div class="section" id="vsa-max-iter">
<h3>VSA_MAX_ITER<a class="headerlink" href="#vsa-max-iter" title="Permalink to this headline">¶</a></h3>
<p>Defines the maximum number of iterations for the <a class="reference internal" href="vsa.html"><span class="doc">VSA algorithm</span></a>.</p>
<blockquote class="nml-param">
<div><p><strong>Type:</strong> <code class="docutils literal notranslate"><span class="pre">INTEGER</span></code></p>
<p><strong>Domain:</strong> vsa_max_iter &gt;= 1</p>
<p><strong>Default:</strong> vsa_max_iter = 1000</p>
</div></blockquote>
<p>The algorithm stops when <code class="docutils literal notranslate"><span class="pre">vsa_max_iter</span></code> is reached, regardless of other
terminating conditions.</p>
</div>
<div class="section" id="vsa-min-delta">
<h3>VSA_MIN_DELTA<a class="headerlink" href="#vsa-min-delta" title="Permalink to this headline">¶</a></h3>
<p>Defines the minimum allowable change in patch proxies between successive iterations of the
<a class="reference internal" href="vsa.html"><span class="doc">VSA algorithm</span></a>.</p>
<blockquote class="nml-param">
<div><p><strong>Type:</strong> <code class="docutils literal notranslate"><span class="pre">REAL</span></code></p>
<p><strong>Domain:</strong> vsa_min_delta &gt;= 0.0</p>
<p><strong>Default:</strong> vsa_min_delta = 1.0E-6</p>
</div></blockquote>
<p>At the end of each iteration, the new patch proxies for the next iteration are computed and compared
against the old proxies. The algorithm keeps track of the <em>minimum</em> change between the old and new
proxies. This change is computed as the sum of the squares of the difference between the old and new
proxy vectors. If the minimum change in patch proxies is less than <code class="docutils literal notranslate"><span class="pre">vsa_min_delta</span></code>, the algorithm
stops at that iteration.</p>
</div>
<div class="section" id="vsa-avg-faces-per-patch">
<h3>VSA_AVG_FACES_PER_PATCH<a class="headerlink" href="#vsa-avg-faces-per-patch" title="Permalink to this headline">¶</a></h3>
<p>Defines the average faces per patch, and by extension the total number of patches, of the
<a class="reference internal" href="vsa.html"><span class="doc">VSA algorithm</span></a>.</p>
<blockquote class="nml-param">
<div><p><strong>Type:</strong> <code class="docutils literal notranslate"><span class="pre">REAL</span></code></p>
<p><strong>Domain:</strong> vsa_avg_faces_per_patch &gt;= 1.0</p>
<p><strong>Default:</strong> vsa_avg_faces_per_patch = 4.0</p>
</div></blockquote>
<p>The average faces per patch is given by</p>
<div class="math notranslate nohighlight">
\[\text{(Total Faces)}/\text{(Total Patches)}\]</div>
<p>Since the number of faces is fixed, this parameter determines the total number of patches in the
final configuration:</p>
<div class="math notranslate nohighlight">
\[\text{(Total Patches)} = \text{(Total Faces)} *
\text{vsa_avg_faces_per_patch}\]</div>
<p>Rather than set the number of patches explicitly, which is mesh dependent, expressing this parameter
as an average allows the same value to apply to a variety of meshes.</p>
</div>
<div class="section" id="vsa-max-patch-radius">
<h3>VSA_MAX_PATCH_RADIUS<a class="headerlink" href="#vsa-max-patch-radius" title="Permalink to this headline">¶</a></h3>
<p>Defines the desired maximum radius for a patch for the <a class="reference internal" href="vsa.html"><span class="doc">VSA algorithm</span></a>.</p>
<blockquote class="nml-param">
<div><p><strong>Type:</strong> <code class="docutils literal notranslate"><span class="pre">REAL</span></code></p>
<p><strong>Domain:</strong> vsa_max_patch_radius &gt; 0.0</p>
<p><strong>Default:</strong> vsa_max_patch_radius = sqrt(huge(0.0_r8))</p>
</div></blockquote>
<p>This parameter is used to compute the <em>size bias</em> term of the weight of a face relative to
a patch proxy. Refer to the <a class="reference internal" href="vsa.html#size-bias"><span class="std std-ref">size bias section</span></a> of the
VSA documentation for more information on how the parameter affects the face weight computation.</p>
<p>Note that the default value of this parameter is <code class="code fortran docutils literal notranslate"><span class="name builtin"><span class="pre">sqrt</span></span><span class="punctuation"><span class="pre">(</span></span><span class="name builtin"><span class="pre">huge</span></span><span class="punctuation"><span class="pre">(</span></span><span class="literal number float"><span class="pre">0.0_r8</span></span><span class="punctuation"><span class="pre">))</span></span></code> because it is squared
in the face weight computation. By taking the root of <code class="code fortran docutils literal notranslate"><span class="name builtin"><span class="pre">huge</span></span><span class="punctuation"><span class="pre">(</span></span><span class="literal number float"><span class="pre">0.0_r8</span></span><span class="punctuation"><span class="pre">)</span></span></code> we prevent floating
point overflow errors. Numerically, the default value on the order of <cite>1.34*10^{154}</cite>.</p>
</div>
<div class="section" id="vsa-normalize-dist">
<h3>VSA_NORMALIZE_DIST<a class="headerlink" href="#vsa-normalize-dist" title="Permalink to this headline">¶</a></h3>
<p>Determines whether to normalize the distance bias for the <a class="reference internal" href="vsa.html"><span class="doc">VSA algorithm</span></a>.</p>
<blockquote class="nml-param">
<div><p><strong>Type:</strong> <code class="docutils literal notranslate"><span class="pre">LOGICAL</span></code></p>
<p><strong>Domain:</strong> Must be <code class="docutils literal notranslate"><span class="pre">.true.</span></code> or <code class="docutils literal notranslate"><span class="pre">.false.</span></code></p>
<p><strong>Default:</strong> vsa_normalize_dist = <code class="docutils literal notranslate"><span class="pre">.true.</span></code></p>
</div></blockquote>
<p>This parameter affects the computation of the <em>distance bias</em> term of the weight of a face relative
to a patch proxy. Broadly speaking, enabling normalization tends to produce patches with a similar
number of faces, regardless of the physical size of each patch. Conversely, disabling normalization
tends to make all patches about the same physical size, regardless of the number of faces in each
patch.</p>
<p>Refer to the <a class="reference internal" href="vsa.html#distance-bias"><span class="std std-ref">distance bias section</span></a>
of the VSA documentation for more information on how the parameter affects the face weight
computation.</p>
</div>
<div class="section" id="vsa-random-seed">
<h3>VSA_RANDOM_SEED<a class="headerlink" href="#vsa-random-seed" title="Permalink to this headline">¶</a></h3>
<p>Defines the seed for the random number generator used to pick the initial seed patches for the
<a class="reference internal" href="vsa.html"><span class="doc">VSA algorithm</span></a>.</p>
<blockquote class="nml-param">
<div><p><strong>Type:</strong> <code class="docutils literal notranslate"><span class="pre">INTEGER</span></code></p>
<p><strong>Domain:</strong> pave_random_seed &gt; 0</p>
<p><strong>Default:</strong> <code class="docutils literal notranslate"><span class="pre">NONE</span></code>, the seed is taken from the system clock.</p>
</div></blockquote>
<p>The VSA algorithm uses a ‘farthest-point’ initialization method to choose the seed patches for the
first iteration. To start, a random face in each connected component of the enclosure is chosen as a
seed patch.  Then, seed patches are added one at a time by performing a <a class="reference internal" href="vsa.html#geometry-partitioning"><span class="std std-ref">partitioning</span></a> and then choosing the face with highest total
distortion as the new seed patch.</p>
<p>This parameter sets the seed for the random number generator used to pick the first seed patch in
each connected component. Therefore, runs with the same value for this parameter will produce
identical results. If this parameter is not specified, then the seed is taken from the system clock
and results will likely vary from run to run.</p>
</div>
</div>
</div>


    </div>
      
  </div>
</div>
<footer class="footer">
  <div class="container">
    <p class="pull-right">
      <a href="#">Back to top</a>
      
    </p>
    <p>
        &copy; Copyright 2019, Los Alamos National Laboratory.<br/>
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 3.5.1.<br/>
    </p>
  </div>
</footer>
  </body>
</html>